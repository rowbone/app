
<div class="no-padder">
	<div class="hbox padder" ng-if="options.isLoading">
		<i class="fa fa-spin fa-spinner m-r-sm"></i>
		<span>加载中</span>
	</div>
	<div ng-if="!options.isLoading && options.collectionNone" class="hbox padder-md text-center v-middle">
		<div class="p-xl"></div>
		<div class="text-md">您目前还没有任何关注的人或组织</div>
		<div class="m-t-sm">
			<a class="text-success" ng-click="addCollection()">
				<div>
					<i class="fa fa-plus-circle text-8x"></i>
				</div>
				<div class="m-t-sm text-md">
					添加联系人或组织
				</div>
			</a>
		</div>
	</div>

	<div ng-if="!options.isLoading && !options.collectionNone">
		<!-- <div class="hbox padder-md"> -->
			<!-- <div class="input-group"> -->
				<!-- <button type="button" class="form-control btn input-lg r-3x bg-white" ng-model="query" ng-keyup="enterPress($event)" ng-click="openSearchModal()">
					<i class="fa fa-search m-r-xs"></i>搜索
				</button> -->
				<!-- <div class="input-group-btn">
				  <button type="button" class="btn btn-primary input-lg r-3x" tabindex=-1>
						<i class="fa fa-search"></i>
				  </button>  	  	
				</div> -->
		  <!-- </div> -->
		<!-- </div> -->

		<div class="hbox m-t-xs m-b-xs text-md bg-collection">
			<a class="col text-md font-bold padder-sm padder-v-sm" ng-click="options.collectionOrgExpand = !options.collectionOrgExpand">
				<span>关注的组织(</span>
				<span class="text-danger"> {{ collections.orgs.length }}</span>
				<span>)</span>
				<i class="fa p-r pull-right text-xxlg" ng-class="{true: 'fa-angle-down', false: 'fa-angle-right'}[options.collectionOrgExpand]"></i>
			</a>
		</div>
        
		<div class="collections" ng-show="options.collectionOrgExpand">
			<div class="" ng-repeat="org in collections.orgs | orderBy:'groupCode' track by $index">
				<div class="hbox b-b padder-v-sm">
					<a conow-modal 
		               full="true"
		               size="lg"
					   url="app/business/cam/organdstaff/org-info-all.html" 
					   controls="OrgInfoAllCtrl" 
					   ng-click="showOrgInfo(org, 'org')"
					>
						<div class="padder-sm">
							<div>
								<span class="text-md">{{ org.ORG_UNIT_NAME }}</span>
							</div>
							<div>
								<span class="m-t-xs text-base">{{ org.ORG_TOTAL_NAME }}</span>	
							</div>
						</div>
					</a>
					<div class="col col-p-sm v-middle padder">
						<button type="button" class="btn btn-danger-square pull-right" ng-click="unFollow(org, 'org')">取消关注</button>
					</div>
				</div>
			</div>
		</div>

		<div class="" ng-repeat="group in collections.personsGroup track by $index" ng-show="group.persons.length > 0">
			<div class="hbox m-t-xs text-md bg-collection">
				<a class="col text-md font-bold padder-sm padder-v-sm" ng-click="group.expanded = !group.expanded">
					<span class="text-md">{{ group.label }}(</span>
					<span class="text-danger"> {{ group.persons.length }}</span>
					<span>)</span>
					<i class="fa p-r pull-right text-xxlg" ng-class="{true: 'fa-angle-down', false: 'fa-angle-right'}[group.expanded]"></i>
				</a>
			</div>
			<div ng-if="group.expanded">
				<div class="hbox b-b padder-v-xs">
					<a class="col text-center font-bold padder-sm padder-v-sm bg-sub-label msg-icon" ng-class="{true: 'bg-primary color-white', false: ''}[subLabel == group.selectedSub]" ng-repeat="subLabel in group.subLabels" ng-click="collectionPersonFilter(group, subLabel)">						
						<span class="text-center text-base">
							{{ subLabel }}
						</span>						
					</a>
				</div>
				<div class="" ng-if="person.GROUPCODE == group.selectedSub" ng-repeat="person in group.persons | filter:query track by $index">
					<div class="hbox b-b padder-v-xs">
						<a conow-modal 
			               full="true"
			               size="lg"
						   url="app/business/cam/staffdetail/staff-info.html" 
						   controls="StaffInfoCtrl" 
						   ng-click="showStaffInfo(person, 'staff')" 
						   class="v-middle padder-v-xs"
						>							
							<div class="col pull-left padder-xs v-middle">
								<img ng-src="{{person.PHOTO}}" alt="" class="thumb-xxs b-2x b-primary" style="width:50px;height:50px;">
							</div>
							<div class="col padder padder-v-xs m-l-xxl v-middle">
								<div>
									<span ng-class="text-md">{{ person.NAME }}</span>
								</div>
								<div>
									<span class="m-t-xs text-base">{{ person.ORG_TOTAL_NAME }}</span>
								</div>
							</div>
						</a>
						<div class="col col-p-sm v-middle padder">
							<button type="button" class="btn btn-danger-square pull-right" ng-click="unFollow(person, 'staff')">取消关注</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>